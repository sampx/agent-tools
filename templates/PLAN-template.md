# PLAN 模板

> 此模板用于 `/plan-feature` 命令。用于在编码前生成详尽、可直接执行的功能实现计划。
> 每个章节包含**填写要求**和**格式示例**，根据项目实际情况调整深度。
> **执行者须知**: 以下计划应当完整且可执行，但在开始实现前，请务必验证文档、代码库模式和任务的合理性。

---

# [特性名称] - 功能实现计划

## 1. 基础元数据 (Feature Metadata)

> **填写要求**:
> - 特性类型、估算复杂度和主要受影响的系统
> - 核心依赖（所需的外部库或服务）

- **特性类型**: [新功能/增强/重构/Bug修复]
- **估算复杂度**: [低/中/高]
- **受影响系统**: [列出主要组件/服务]
- **核心依赖**: [所需的外部库或服务]

---

## 2. 功能概述 (Feature Overview)

> **填写要求**:
> - 详细描述该功能、其目的以及对用户的价值（问题与方案）
> - 清晰的用户故事

**面临问题**: [描述要解决的核心问题]

**解决方案**: [描述建议的解决方案架构及如何解决该问题]

**用户故事**:
作为 [用户类型]
我想要 [动作/目标]
以便于 [收益/价值]

---

## 3. 上下文参考 (Context References)

> **填写要求**:
> - 列出与实现相关的现有文件（带上行号及说明）
> - 列出计划中需要新建的文件及其用途
> - 列出需要参考的官方文档或内部指南链接

### 现有代码参考

- `path/to/file.py` (行 15-45) - **原因**: 包含我们将要模仿的 X 模式
- `path/to/model.py` (行 100-120) - **原因**: 需要遵循的数据库模型结构

### 需要创建的新文件

- `path/to/new_service.py` - 用于 X 功能的服务实现
- `tests/path/to/test_new_service.py` - 新服务的单元测试

### 参考文档

- [文档链接 1](https://example.com/doc1#section)
  - 特定章节: 认证设置
  - 原因: 实现安全端点所需

---

## 4. 需遵循的代码模式 (Patterns to Follow)

> **填写要求**:
> - 从当前代码库中提取出的特定模式
> - 应当附带具体示例或所在文件参考

- **命名约定**: [例如：服务类必须以 Service 结尾]
- **错误处理**: [例如：使用统一的 ApiError 抛出]
- **日志记录**: [例如：使用 logger.info 记录关键节点]

---

## 5. 阶段实现计划 (Implementation Plan)

> **填写要求**:
> - 将功能按逻辑阶段划分（基础、核心、集成、测试等）
> - 每个阶段列出目标任务，使用 ✅ checkbox

### Phase 1: 基础构建 (Foundation)

**目标**: [描述实现前的基础工作]

**任务**:
- [ ] 设置基础结构（Schema、Type、Interface）
- [ ] 配置必要的依赖

### Phase 2: 核心实现 (Core Implementation)

**目标**: [描述主要实现工作]

**任务**:
- [ ] 实现核心业务逻辑
- [ ] 创建服务层组件

### Phase 3: 集成与测试 (Integration & Testing)

**目标**: [描述如何与现有功能集成，以及验证方式]

**任务**:
- [ ] 注册新的组件或路由
- [ ] 为每个组件编写单元测试

---

## 6. 详细任务拆解 (Step-By-Step Tasks)

> **填写要求**:
> - 按从上到下的顺序执行每个任务，任务必须是原子可独立测试的。
> - 使用前缀：CREATE(新建), UPDATE(更新), ADD(新增), REMOVE(移除), REFACTOR(重构), MIRROR(模仿)。

### T1: {ACTION} {target_file}

- **IMPLEMENT**: {具体的实现细节}
- **PATTERN**: {参考现有模式 - file:line}
- **IMPORTS**: {需要的导入和依赖}
- **GOTCHA**: {需要避免的已知问题或陷阱}
- **VALIDATE**: `{可执行的验证命令}`

### T2: {ACTION} {target_file}

- **IMPLEMENT**: {具体的实现细节}
- **PATTERN**: {参考现有模式 - file:line}
- **VALIDATE**: `{可执行的验证命令}`

*(继续列出所有依赖排序的任务...)*

---

## 7. 测试策略 (Testing Strategy)

> **填写要求**:
> - 基于项目的测试框架和研究阶段发现的模式定义测试方案

**单元测试 (Unit Tests)**:
[范围和要求，例如：遵循 jest + react-testing-library]

**集成测试 (Integration Tests)**:
[范围和要求]

**边界用例 (Edge Cases)**:
- [边界用例 1]
- [边界用例 2]

---

## 8. 验证命令 (Validation Commands)

> **填写要求**:
> - 执行每个命令以确保无回归和 100% 的功能正确性

| 验证层级 | 执行命令 | 预期结果 |
|---------|---------|---------|
| Level 1 (语法与风格) | `[项目特定的 lint/format 命令]` | 无警告/错误 |
| Level 2 (单元测试) | `[项目特定的单元测试命令]` | 所有测试通过 |
| Level 3 (手动验证) | [说明如何验证，如 CURL 或 UI 路径] | 表现符合预期 |

---

## 9. 验收标准 (Acceptance Criteria)

> **填写要求**:
> - 列出具体、可衡量的完成标准

- [ ] 功能实现了所有指定的需求
- [ ] 所有验证命令执行通过且无错误
- [ ] 代码遵循项目的约定和模式
- [ ] 没有破坏现有的功能回归

---

> Generated by `/plan-feature` command
